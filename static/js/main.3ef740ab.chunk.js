(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n.n(r),s=n(20),i=n.n(s),l=(n(27),n(10)),o=(n(28),n(5)),j="userData";var u=n(3),d=n.n(u),b=n(8);function O(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),s=Object(o.a)(a,2),i=s[0],l=s[1];return{loading:n,error:i,request:Object(r.useCallback)(function(){var e=Object(b.a)(d.a.mark((function e(t,n,r,a){var s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,fetch(t,{method:n,body:r,headers:a});case 4:return s=e.sent,e.next=7,s.json();case 7:if(i=e.sent,s.ok){e.next=10;break}throw new Error(i.message||"Failed to fetch");case 10:return c(!1),e.abrupt("return",i);case 14:throw e.prev=14,e.t0=e.catch(1),c(!1),l(e.t0.message),e.t0;case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n,c,r){return e.apply(this,arguments)}}(),[]),clearError:Object(r.useCallback)((function(){return l(null)}),[])}}var h=n(2),x=function(e){var t=e.links;return t.length?Object(c.jsxs)("table",{className:"highlight",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"#"}),Object(c.jsx)("th",{children:"Original link"}),Object(c.jsx)("th",{children:"Cut link"}),Object(c.jsx)("th",{children:"Open"})]})}),Object(c.jsx)("tbody",{children:t.map((function(e,t){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t+1}),Object(c.jsx)("td",{children:e.from}),Object(c.jsx)("td",{children:e.to}),Object(c.jsx)("td",{children:Object(c.jsx)(l.b,{to:"/detail/".concat(e._id),children:"Open"})})]},t)}))})]}):Object(c.jsx)("p",{className:"center",children:"Empty list \xaf\\_(\u30c4)_/\xaf"})},p=a.a.memo(x),f=function(){return Object(c.jsx)("div",{className:"preloader-wrapper big active",style:{display:"flex",justifyContent:"center",paddingTop:"2rem"},children:Object(c.jsxs)("div",{className:"spinner-layer spinner-blue-only",children:[Object(c.jsx)("div",{className:"circle-clipper left",children:Object(c.jsx)("div",{className:"circle"})}),Object(c.jsx)("div",{className:"gap-patch",children:Object(c.jsx)("div",{className:"circle"})}),Object(c.jsx)("div",{className:"circle-clipper right",children:Object(c.jsx)("div",{className:"circle"})})]})})},v=a.a.memo(f),m=Object(r.createContext)({token:"",userId:"",login:function(e,t){},logout:function(){},isAuthenticated:!1}),g=function(){var e=Object(r.useContext)(m).token,t=Object(r.useState)([]),n=Object(o.a)(t,2),s=n[0],i=n[1],l=O(),j=l.loading,u=l.request;return Object(r.useEffect)((function(){Object(b.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u("/api/link","GET",null,{Authorization:"Bearer ".concat(e)});case 3:n=t.sent,i(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),[u,e]),j?Object(c.jsx)(v,{}):Object(c.jsx)(a.a.Fragment,{children:!j&&Object(c.jsx)(p,{links:s})})},k=a.a.memo(g),w=n(12),y=function(e){var t=e.label,n=e.htmlFor,r=e.type,a=e.name,s=e.id,i=e.value,l=e.onChangeHandler,o=e.keyPressHandler,j=e.style;return Object(c.jsxs)("div",{className:"input-field",children:[Object(c.jsx)("input",{className:"yellow-input",type:r,name:a,id:s,value:i,style:Object(w.a)({color:"white"},j),onChange:l,onKeyPress:o}),Object(c.jsx)("label",{htmlFor:n,children:t})]})},C=a.a.memo(y),N=function(){var e=Object(h.g)(),t=Object(r.useContext)(m),n=O().request,a=Object(r.useState)(""),s=Object(o.a)(a,2),i=s[0],l=s[1],j=function(){var c=Object(b.a)(d.a.mark((function c(r){var a,s;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if("Enter"!==r.key){c.next=11;break}return c.prev=1,c.next=4,n("/api/link/generate","POST",JSON.stringify({from:i}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)});case 4:a=c.sent,s="/detail/"+a.link._id,e.push(s),c.next=11;break;case 9:c.prev=9,c.t0=c.catch(1);case 11:case"end":return c.stop()}}),c,null,[[1,9]])})));return function(e){return c.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e,t;null===(e=window)||void 0===e||null===(t=e.M)||void 0===t||t.updateTextFields()})),Object(c.jsx)("div",{style:{paddingTop:"2rem"},children:Object(c.jsx)("div",{className:"col s8 offset-s2 blue darken-1",style:{padding:"2rem"},children:Object(c.jsx)(C,{label:"Insert a link",htmlFor:"link",type:"text",name:"Link",id:"link",value:i,onChangeHandler:function(e){l(e.target.value)},keyPressHandler:j})})})},S=a.a.memo(N),F=function(e){var t=e.link;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{children:"Link"}),Object(c.jsxs)("p",{children:["Your link:"," ",Object(c.jsx)("a",{href:t.to,target:"_blank",rel:"noopener noreferrer",children:t.to})]}),Object(c.jsxs)("p",{children:["From:"," ",Object(c.jsx)("a",{href:t.from,target:"_blank",rel:"noopener noreferrer",children:t.from})]}),Object(c.jsxs)("p",{children:["Clicks: ",Object(c.jsx)("b",{children:t.clicks})]}),Object(c.jsxs)("p",{children:["Created: ",Object(c.jsx)("b",{children:new Date(t.date).toLocaleDateString()})]})]})},T=function(){var e=Object(r.useContext)(m).token,t=O(),n=t.request,s=t.loading,i=Object(r.useState)({}),l=Object(o.a)(i,2),j=l[0],u=l[1],x=Object(h.h)().id;return Object(r.useEffect)((function(){Object(b.a)(d.a.mark((function t(){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("/api/link/".concat(x),"GET",null,{Authorization:"Bearer ".concat(e)});case 3:c=t.sent,u(c),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),[e,x,n]),s?Object(c.jsx)(v,{}):Object(c.jsx)(a.a.Fragment,{children:!s&&j&&Object(c.jsx)(F,{link:j})})},E=n(14),I=function(){var e=L.useHTTP,t=L.useMessage,n=Object(r.useContext)(m),a=t(),s=Object(r.useState)({email:"",password:""}),i=Object(o.a)(s,2),l=i[0],j=i[1],u=e(),O=u.loading,h=u.error,x=u.request,p=u.clearError,f=function(e){j(Object(w.a)(Object(w.a)({},l),{},Object(E.a)({},e.target.name,e.target.value)))};Object(r.useEffect)((function(){a(h),p()}),[h,a,p]),Object(r.useEffect)((function(){var e,t;null===(e=window)||void 0===e||null===(t=e.M)||void 0===t||t.updateTextFields()}));var v=function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/api/auth/".concat(t),"POST",JSON.stringify(Object(w.a)({},l)),{"Content-Type":"application/json"});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("register");case 3:t=e.sent,a(t.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("login");case 3:t=e.sent,n.login(t.token,t.userId),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col s6 offset-s3",children:[Object(c.jsx)("h1",{children:"Link Cutter"}),Object(c.jsxs)("div",{className:"card blue darken-1",children:[Object(c.jsxs)("div",{className:"card-content white-text",children:[Object(c.jsx)("span",{className:"card-title",children:"Authentication"}),Object(c.jsxs)("div",{children:[Object(c.jsx)(C,{label:"Email",htmlFor:"email",type:"text",name:"email",id:"email",value:l.email,onChangeHandler:f}),Object(c.jsx)(C,{label:"Password",htmlFor:"password",type:"password",name:"password",id:"password",value:l.password,onChangeHandler:f})]})]}),Object(c.jsxs)("div",{className:"card-action",children:[Object(c.jsx)("button",{className:"btn lime accent-4 black-text",style:{marginRight:10},onClick:k,disabled:O,children:"Sign in"}),Object(c.jsx)("button",{className:"btn grey lighten-1 black-text",onClick:g,disabled:O,children:"Sign up"})]})]})]})})},P=a.a.memo(I);var L={useAuth:function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(o.a)(a,2),i=s[0],l=s[1],u=Object(r.useState)(""),d=Object(o.a)(u,2),b=d[0],O=d[1],h=function(e,t){l(e),O(t);var n=JSON.stringify({token:e,userId:t});localStorage.setItem(j,n)},x=function(){l(""),O(""),localStorage.removeItem(j)},p=Object(r.useCallback)(h,[h]),f=Object(r.useCallback)(x,[x]);return Object(r.useEffect)((function(){var e=localStorage.getItem(j);if(e){var t=JSON.parse(e);t&&t.token&&p(t.token,t.userId)}c(!0)}),[p]),{login:p,logout:f,token:i,userId:b,ready:n}},useHTTP:O,useMessage:function(){return Object(r.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[])},useRoutes:function(e){return e?Object(c.jsxs)(h.d,{children:[Object(c.jsx)(h.b,{path:"/links",exact:!0,children:Object(c.jsx)(k,{})}),Object(c.jsx)(h.b,{path:"/create",exact:!0,children:Object(c.jsx)(S,{})}),Object(c.jsx)(h.b,{path:"/detail/:id",children:Object(c.jsx)(T,{})}),Object(c.jsx)(h.a,{to:"/create"})]}):Object(c.jsxs)(h.d,{children:[Object(c.jsx)(h.b,{path:"/",exact:!0,children:Object(c.jsx)(P,{})}),Object(c.jsx)(h.a,{to:"/"})]})}},A=function(){var e=Object(r.useContext)(m),t=Object(h.g)();return Object(c.jsx)("nav",{className:"blue darken-1",style:{padding:"0 2rem"},children:Object(c.jsxs)("div",{className:"nav-wrapper",children:[Object(c.jsx)("span",{className:"brand-logo",children:"Link Cutter"}),Object(c.jsxs)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:[Object(c.jsx)("li",{children:Object(c.jsx)(l.c,{to:"/create",children:"Create"})}),Object(c.jsx)("li",{children:Object(c.jsx)(l.c,{to:"/links",children:"Links"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"/",onClick:function(n){null===n||void 0===n||n.preventDefault(),e.logout(),t.push("/")},children:"Logout"})})]})]})})},H=a.a.memo(A),M=L.useAuth,J=L.useRoutes;var _=function(){var e=M(),t=e.login,n=e.logout,r=e.token,a=e.userId,s=e.ready,i=!!r,o=J(i);if(!s)return Object(c.jsx)(v,{});var j={token:r,userId:a,login:t,logout:n,isAuthenticated:i};return Object(c.jsx)(m.Provider,{value:j,children:Object(c.jsxs)(l.a,{children:[i&&Object(c.jsx)(H,{}),Object(c.jsx)("div",{className:"container",children:o})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(_,{})}),document.getElementById("root")),q()}},[[37,1,2]]]);
//# sourceMappingURL=main.3ef740ab.chunk.js.map